<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Planillas SIU Guaran√≠</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="icon" href="../static/images/icono.ico" type="image/x-icon">
    <link rel="shortcut icon" href="../static/images/icono.ico" type="image/x-icon">
</head>
<body>
    <!-- Cabecera con logo institucional -->
    <header>
        <header class="header-container">
    <div class="header-content">
        <img src="{{ url_for('static', filename='images/logo_principal.jpg') }}" alt="Logo UTN" class="header-logo">

        <div class="header-text">
            <h1 class="titulo-principal">Adecuaci√≥n de Planillas</h1>
            <h2 class="subtitulo-principal">SIGEAD - SIU Guaran√≠</h2>
        </div>
    </div>
    </header>

    <!-- Formulario para carga de archivos -->
    <form action="/" method="post" enctype="multipart/form-data" id="upload-form">

        <div id="format-error-container"></div>
        
        <!-- Modal de requisitos que se mostrar√° junto con el error -->
        <div id="requirements-modal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h3>üìã Requisitos del Archivo Excel</h3>
                
                <div class="modal-sections">
                    <!-- Secci√≥n 1: Requisitos principales -->
                    <div class="section-main">
                        <h4>‚úÖ Requisitos obligatorios:</h4>
                        <ul id="requirements-list">
                            <li><strong>Formato:</strong> Archivo .xlsx o .xls (m√°x. 16MB)</li>
                            <li><strong>Columnas:</strong> Exactamente 9 columnas en este orden:</li>
                            <ol>
                                <li>Legajo</li>
                                <li>Nota</li>
                                <li>Promocionado</li>
                                <li>Apellido</li>
                                <li>Nombre</li>
                                <li>DNI</li>
                                <li>Edicion</li>
                                <li>Fecha de inicio</li>
                                <li>Facultad regional</li>
                            </ol>
                            <li><strong>Datos:</strong> Solo tabla con datos, sin t√≠tulos adicionales</li>
                            <li><strong>Facultad:</strong> Solo registros con exactamente "FRBA" o "UTN FRBA" (no incluye "FRBA - Buenos Aires" u otras variaciones)</li>
                            <li><strong>Notas:</strong> N√∫meros v√°lidos (1-10)</li>
                            <li><strong>Campos obligatorios:</strong> Apellido y Nombre deben tener datos (Legajo es opcional)</li>
                        </ul>
                    </div>
                    
                    <!-- Secci√≥n 2: Ejemplo visual -->
                    <div class="section-example">
                        <h4>üì∏ Ejemplo de formato correcto:</h4>
                        <div class="image-container">
                            <a href="#" id="example-image-link">
                                <img id="example-image" src="{{ url_for('static', filename='images/ejemplo.png') }}" alt="Ejemplo de Excel v√°lido">
                            </a>
                            <p class="image-caption">Haga clic en la imagen para ampliar</p>
                        </div>
                    </div>
                    
                    <!-- Secci√≥n 3: Notas y consejos combinados -->
                    <div class="section-combined">
                        <div class="notes-section">
                            <h4>‚ö†Ô∏è Notas importantes:</h4>
                            <ul>
                                <li>Archivo limpio sin filas vac√≠as al inicio</li>
                                <li>Fechas en formato DD/MM/YYYY</li>
                                <li>DNIs como n√∫meros v√°lidos</li>
                                <li>Solo se procesan registros FRBA</li>
                            </ul>
                        </div>
                        
                        <div class="tips-section">
                            <h4>üí° Consejos:</h4>
                            <ul>
                                <li>Verifique 9 columnas exactas</li>
                                <li>Columna "Facultad regional" debe contener "FRBA"</li>
                                <li>Notas entre 1 y 10</li>
                                <li>Sin filas de encabezado adicionales</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Drop zone para carga de archivos -->
        <div id="drop-zone">
            <label for="file">
                <span id="drop-text">Arrastrar y soltar archivo o hacer clic para seleccionar</span>
            </label>
            <input type="file" name="file" id="file" accept=".xlsx" required>
            <div id="file-list">No hay archivo seleccionado</div>
        </div>

        <!-- Campos del formulario -->
        <label for="campo1">Propuesta:</label>
        <input type="text" name="campo1" id="campo1" required>

        <label for="campo2">Comisi√≥n:</label>
        <input type="text" name="campo2" id="campo2" required>

        <label for="campo3">Actividad:</label>
        <input type="text" name="campo3" id="campo3" required>

        <label for="campo4">Periodo Lectivo:</label>
        <input type="text" name="campo4" id="campo4" required>
        
        <label for="campo5">Fecha Regular:</label>
        <input type="text" name="campo5" id="campo5" required>

        <label for="campo6">Fecha de Promoci√≥n:</label>
        <input type="text" name="campo6" id="campo6" required>

        <button id="subir_archivo" type="submit">Subir Archivo</button>
        
        <!-- Bot√≥n de ayuda discreto -->
        <div class="help-section">
            <button type="button" id="show-requirements-help" class="help-btn-small">
                ¬øNecesitas ayuda con el formato del archivo?
            </button>
        </div>
    </form>

    <!-- Contenedor centrado para la secci√≥n de requisitos -->
    <div class="requirements-container" style="display: none;">
        <!-- Secci√≥n de reglas y requisitos (oculta inicialmente) -->
        <div id="requirements-section" class="requirements-section">
            <div class="requirements-header">
                <h3>üìã Requisitos del Archivo Excel</h3>
                <button type="button" id="toggle-requirements" class="toggle-btn">
                    <span id="toggle-text">Ocultar detalles</span>
                    <span id="toggle-icon">‚ñ≤</span>
                </button>
            </div>
            
            <div id="requirements-content" class="requirements-content">
                <div class="requirements-grid">
                    <div class="requirements-list">
                        <h4>‚úÖ Requisitos obligatorios:</h4>
                        <ul>
                            <li><strong>Formato:</strong> Archivo .xlsx o .xls</li>
                            <li><strong>Columnas:</strong> Exactamente 9 columnas en este orden:</li>
                            <ol>
                                <li>Legajo</li>
                                <li>Nota</li>
                                <li>Promocionado</li>
                                <li>Apellido</li>
                                <li>Nombre</li>
                                <li>DNI</li>
                                <li>Edicion</li>
                                <li>Fecha de inicio</li>
                                <li>Facultad regional</li>
                            </ol>
                            <li><strong>Datos:</strong> Solo la tabla con datos, sin t√≠tulos adicionales</li>
                            <li><strong>Facultad:</strong> Solo se procesan registros con exactamente "FRBA" o "UTN FRBA" (no incluye "FRBA - Buenos Aires" u otras variaciones)</li>
                            <li><strong>Notas:</strong> Deben ser n√∫meros v√°lidos (1-10)</li>
                            <li><strong>Campos obligatorios:</strong> Apellido y Nombre deben tener datos (Legajo es opcional)</li>
                        </ul>
                    </div>
                    
                    <div class="example-container">
                        <h4>üì∏ Ejemplo de formato correcto:</h4>
                        <a href="#" id="example-image-link">
                            <img id="example-image" src="{{ url_for('static', filename='images/ejemplo.png') }}" alt="Ejemplo de Excel v√°lido">
                        </a>
                        <p class="image-caption">Haga clic en la imagen para ampliar</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Secci√≥n de descarga (inicialmente oculta) -->
    <div id="download-section" style="display: none;">
        <h3>Archivo subido: <span id="uploaded-file-name"></span></h3>
        <h3>Archivos procesados disponibles para descarga:</h3>
        <a id="download-alumnos" href="#" style="display: none;">
            <button>Descargar Alumnos</button>
        </a>
        <a id="download-notas" href="#" style="display: none;">
            <button>Descargar Notas</button>
        </a>
        <div style="margin-top: 20px;">
            <button id="restart-button" type="button">Cargar Nuevo Archivo</button>
        </div>
    </div>

    <!-- Script principal de la aplicaci√≥n -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
